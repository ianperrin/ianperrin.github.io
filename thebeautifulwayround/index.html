<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>The Beautiful Way Round</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous" />

    <!-- page CSS -->
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Makes the page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>

    <!--header section-->
    <header>
      <nav class="navbar navbar-expand-md navbar-light fixed-top bg-light">
        <span class="h1" class="navbar-brand mb-0">The Beautiful Way Round</span>
      </nav>
    </header>

    <!--maps section-->
    <section class="map" id="map">
      <div class="container">
        <div id="map"></div>
      </div>
    </section>

    <!-- Page JavaScript -->
    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 8,
          center: {lat: 50.8, lng: -3.9}
        });
        var ctaLayer = new google.maps.KmlLayer({
          url: 'https://github.com/ianperrin/ianperrin.github.io/blob/master/thebeautifulwayround/route2.kml?raw=true',
          clickable: false
        });
        ctaLayer.setMap(map);

        google.maps.event.addListenerOnce(ctaLayer, 'defaultviewport_changed', function() {
          center = ctaLayer.getDefaultViewport().getCenter();
          map.panTo(center);
        });
        
        google.maps.event.addListener(ctaLayer, 'click', function(kmlEvent) {
          var text = kmlEvent.featureData.description;
          alert(text);
        });
      }
      
    </script>

    <!-- Google Maps core JavaScript -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKy2mX8SnitgMznopvS9A1t4G0RTU2oY0&callback=initMap"></script>

    <!-- Bootstrap core JavaScript  -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

  </body>
</html>
